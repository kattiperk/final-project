(this["webpackJsonpmessenger-app"]=this["webpackJsonpmessenger-app"]||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},322:function(e,t,n){},325:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(32),s=n.n(r),i=(n(134),n(53)),u=n(7),o=(n(135),n(330)),p=(n(136),n(54)),d=(n(326),n(137),p.a.initializeApp({apiKey:"AIzaSyDLPTDnPCnD4iEty4SdULz0IRLwr72PNTQ",authDomain:"messaging-app-4c475.firebaseapp.com",projectId:"messaging-app-4c475",storageBucket:"messaging-app-4c475.appspot.com",messagingSenderId:"402861630323",appId:"1:402861630323:web:6dc57f7d2d8c14ab0c9b06"}).auth()),b=n(4);function h(){return Object(b.jsx)("div",{className:"login-wrapper bg-dark bg-gradient d-flex align-items-center justify-content-center",children:Object(b.jsxs)("div",{className:"login-card bg-white rounded-circle",children:[Object(b.jsx)("h1",{children:"Welcome to Chat!"}),Object(b.jsxs)("button",{className:"btn btn-primary google",onClick:function(){return d.signInWithPopup(new p.a.auth.GoogleAuthProvider)},children:[Object(b.jsx)(o.a,{}),Object(b.jsx)("span",{className:"ps-2",children:"Sign in"})]})]})})}var j=n(35),l=n.n(j),f=n(74),g=n(34),m=n(129),O=(n(322),c.a.createContext()),x=function(e){var t=e.children,n=Object(a.useState)(!0),c=Object(g.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),o=Object(g.a)(i,2),p=o[0],h=o[1],j=Object(u.f)();Object(a.useEffect)((function(){d.onAuthStateChanged((function(e){h(e),s(!1),e&&j.push("/chats")}))}),[p,j]);var l={user:p};return Object(b.jsx)(O.Provider,{value:l,children:!r&&t})},v=n(6),w=n.n(v);function y(){var e=Object(a.useRef)(!1),t=Object(u.f)(),n=Object(a.useContext)(O).user,c=Object(a.useState)(!0),r=Object(g.a)(c,2),s=r[0],i=r[1],o=function(){var e=Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signOut();case 2:t.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(f.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return a=e.sent,e.abrupt("return",new File([a],"userPhoto.jpg",{type:"image/jpeg"}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(!e.current){if(e.current=!0,!n||null===n)return void t.push("/");w.a.get("https://api.chatengine.io/users/me/",{headers:{"project-id":"9820dba1-f720-48db-858b-03f73b17274a","user-name":n.email,"user-secret":n.uid}}).then((function(){i(!1)})).catch((function(){var e=new FormData;e.append("email",n.email),e.append("username",n.email),e.append("secret",n.uid),p(n.photoURL).then((function(t){e.append("avatar",t,t.name),w.a.post("https://api.chatengine.io/users/",e,{headers:{"private-key":"d1180709-f92e-4904-ba8e-ed7888976b90"}}).then((function(){return i(!1)})).catch((function(e){return console.log(e)}))}))}))}}),[n,t]),!n||s?"Loading...":Object(b.jsxs)("div",{className:"chats-page",children:[Object(b.jsxs)("div",{className:"nav bg-dark ps-5 pe-5 d-flex justify-content-between align-items-center",children:[Object(b.jsx)("div",{className:"logo",children:"Messenger Chat"}),Object(b.jsx)("button",{type:"button",onClick:o,className:"btn btn-danger",children:"Logout"})]}),Object(b.jsx)(m.d,{height:"calc(100vh - 66px)",projectID:"9820dba1-f720-48db-858b-03f73b17274a",userName:n.email,userSecret:n.uid})]})}var k=function(){return Object(b.jsx)("div",{className:"bg-dark",children:Object(b.jsx)(i.a,{children:Object(b.jsx)(x,{children:Object(b.jsxs)(u.c,{children:[Object(b.jsx)(u.a,{path:"/chats",component:y}),Object(b.jsx)(u.a,{path:"/",component:h})]})})})})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,331)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root")),C()}},[[325,1,2]]]);
//# sourceMappingURL=main.ed8ed04f.chunk.js.map